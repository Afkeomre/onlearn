!function(){"use strict";const e=async(e,t)=>{const s=await fetch(e,{method:"POST",body:t,headers:{"Content-Type":"application/json"}});return await s.json()},t=(e=0)=>{e=window.scrollY,document.body.style.top=`-${e}px`},s=(e=0)=>{document.body.style.top="",window.scrollTo(0,e)};function n(e){e.classList.add("none"),s(),document.querySelector(".mobile-nav").classList.contains("mobile-nav_open")||document.body.classList.remove("no-scroll")}var o=function(e,s){const o=document.querySelector(e);document.querySelectorAll(s).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),o.classList.remove("none"),document.body.classList.add("no-scroll"),t()}))})),o.addEventListener("click",(e=>{e.target!==o&&""!==e.target.getAttribute("data-close")||n(o)})),document.addEventListener("keydown",(e=>{"Escape"===e.code&&n(o)}))},a=function(t,s,o){const a=document.querySelectorAll(t),c={loading:"./../../img/spinner.svg",success:{text:s,class:"green"},failure:{text:"Something went wrong :(",class:"red"},incorrectUser:{text:o,class:"red"},incorrectConfirm:"Passwords do not match"};let i=!0;a.forEach((t=>{!function(t){function s(e,s){const o=document.createElement("div");o.classList.add(s),o.textContent=e;const a=t.nextElementSibling;a.classList.remove("none"),t.classList.add("none"),a.append(o),setTimeout((()=>{n(a.closest(".modal")),a.classList.add("none"),o.remove(),t.classList.remove("none")}),4e3)}function o(e,t,s,n,o){if(e.has("signupPassword")&&e.has("confirmPassword")&&e.get("signupPassword")!==e.get("confirmPassword"))return t.classList.add("red"),t.textContent=n.incorrectConfirm,o.append(t),document.getElementById("signupSubmit").disabled=!0,o.querySelectorAll("input").forEach((e=>{e.addEventListener("input",(()=>{(e.classList.contains("signup-password")||e.classList.contains("signup-confirm"))&&(t.remove(),document.getElementById("signupSubmit").disabled=!1)}))})),!1;t.remove(),s.src=n.loading,o.append(s)}function a(e,t){e.reset(),t?.remove()}t.addEventListener("submit",(n=>{n.preventDefault();const r=new FormData(t),l=document.createElement("div"),d=document.createElement("img");if(o(r,l,d,c,t),!1===o(r,l,d,c,t))return;const u=JSON.stringify(Object.fromEntries(r.entries()));(async e=>{const t=await fetch(e);if(200!==t.status)throw new Error(`Could not fetch ${e}, status: ${t.status}`);return await t.json()})("https://c1cf054ef519e1a2.mokky.dev/users").then((e=>{let t;r.has("loginEmail")&&r.has("loginPassword")?(t=e.find((e=>r.get("loginEmail")===e.signupEmail&&r.get("loginPassword")===e.signupPassword)),void 0===t?.id?(s(c.incorrectUser.text,c.incorrectUser.class),i=!1):i=!0):r.has("signupEmail")&&r.has("signupPassword")&&(t=e.find((e=>r.get("signupEmail")===e.signupEmail||r.get("signupPassword")===e.signupPassword)),void 0!==t?.id?(s(c.incorrectUser.text,c.incorrectUser.class),i=!1):i=!0)})).catch((()=>{i=!1,s(c.failure.text,c.failure.class)})).finally((()=>{i?e("https://c1cf054ef519e1a2.mokky.dev/users",u).then((e=>{console.log(e),s(c.success.text,c.success.class),function(){const e=document.querySelectorAll("[data-login]"),t=document.querySelectorAll("[data-signup]"),s=document.querySelectorAll("[data-exit]");s.forEach((e=>e.classList.remove("none"))),e.forEach((e=>e.classList.add("none"))),t.forEach((e=>e.classList.add("none"))),s.forEach((n=>{n.addEventListener("click",(()=>{s.forEach((e=>e.classList.add("none"))),e.forEach((e=>e.classList.remove("none"))),t.forEach((e=>e.classList.remove("none")))}))}))}()})).catch((()=>{s(c.failure.text,c.failure.class)})).finally((()=>{a(t,d)})):a(t,d)}))}))}(t)}))},c=function(e){const t=document.querySelectorAll(e);window.addEventListener("load",(()=>{t.forEach(((e,t)=>{e.href===window.location.href||0==t&&-1===window.location.href.indexOf("html")?e.classList.add("active"):e.classList.remove("active")}))}))};window.addEventListener("DOMContentLoaded",(()=>{(function(){const e=document.querySelector(".mobile-nav__btn"),n=document.querySelector(".mobile-nav"),o=document.querySelector(".nav-icon");e.addEventListener("click",(function(){n.classList.toggle("mobile-nav_open"),o.classList.toggle("nav-icon_active"),document.body.classList.toggle("no-scroll"),n.classList.contains("mobile-nav_open")?t():s()}))})(),o(".modal__login","[data-login]"),o(".modal__signup","[data-signup]"),(()=>{const e=document.querySelectorAll(".password__btn"),t=document.querySelectorAll(".password__input");e.forEach(((e,s)=>{e.addEventListener("click",(()=>{e.classList.toggle("password__btn_active"),t.forEach(((e,t)=>{s===t&&("password"===e.getAttribute("type")?e.setAttribute("type","text"):e.setAttribute("type","password"))}))}))}))})(),a("#loginForm","You are successfully logged in to your account","This user was not found. Please sign up at first"),a("#signupForm","You are successfully registered","This data has already been registered. Please log in or use another data to sign up"),function(t){const s=document.querySelectorAll(t),n="./../../img/spinner.svg",o={text:"Thank you for your message! We'll send you the information",class:"green"},a={text:"Something went wrong :(",class:"red"};s.forEach((t=>{!function(t){function s(e,s){const n=document.createElement("div");n.textContent=e,n.style.marginTop="15px",n.style.textAlign="center",n.style.fontSize="14px",n.classList.add(s),t.append(n),setTimeout((()=>{n.remove()}),4e3)}t.addEventListener("submit",(c=>{c.preventDefault();const i=document.createElement("img");i.src=n,i.style.marginTop="15px",i.style.alignSelf="center",t.append(i);const r=new FormData(t),l=JSON.stringify(Object.fromEntries(r.entries()));e("https://c1cf054ef519e1a2.mokky.dev/subscribers",l).then((e=>{console.log(e),s(o.text,o.class)})).catch((()=>{s(a.text,a.class)})).finally((()=>{t.reset(),i.remove()}))}))}(t)}))}("#newsletterForm"),c(".header-nav__list a"),c(".mobile-nav__list a")}))}();