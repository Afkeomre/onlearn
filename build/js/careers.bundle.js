!function(){"use strict";function e(e){e.classList.add("none"),document.querySelector(".mobile-nav").classList.contains("mobile-nav_open")||document.body.classList.remove("no-scroll")}var t=function(t,s){const n=document.querySelector(t);document.querySelectorAll(s).forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),n.classList.remove("none"),document.body.classList.add("no-scroll")}))})),n.addEventListener("click",(t=>{t.target!==n&&""!==t.target.getAttribute("data-close")||e(n)})),document.addEventListener("keydown",(t=>{"Escape"===t.code&&e(n)}))};const s=async(e,t)=>{const s=await fetch(e,{method:"POST",body:t,headers:{"Content-Type":"application/json"}});return await s.json()};var n=function(t,n,o){const c=document.querySelectorAll(t),a={loading:"./../../img/spinner.svg",success:{text:n,class:"green"},failure:{text:"Something went wrong :(",class:"red"},incorrectUser:{text:o,class:"red"},incorrectConfirm:"Passwords do not match"};let i=!0;c.forEach((t=>{!function(t){function n(s,n){const o=document.createElement("div");o.classList.add(n),o.textContent=s;const c=t.nextElementSibling;c.classList.remove("none"),t.classList.add("none"),c.append(o),setTimeout((()=>{e(c.closest(".modal")),c.classList.add("none"),o.remove(),t.classList.remove("none")}),4e3)}function o(e,t,s,n,o){if(e.has("signupPassword")&&e.has("confirmPassword")&&e.get("signupPassword")!==e.get("confirmPassword"))return t.classList.add("red"),t.textContent=n.incorrectConfirm,o.append(t),document.getElementById("signupSubmit").disabled=!0,o.querySelectorAll("input").forEach((e=>{e.addEventListener("input",(()=>{(e.classList.contains("signup-password")||e.classList.contains("signup-confirm"))&&(t.remove(),document.getElementById("signupSubmit").disabled=!1)}))})),!1;t.remove(),s.src=n.loading,o.append(s)}function c(e,t){e.reset(),t.remove()}t.addEventListener("submit",(e=>{e.preventDefault();const r=new FormData(t),l=document.createElement("div"),d=document.createElement("img");if(o(r,l,d,a,t),!1===o(r,l,d,a,t))return;const u=JSON.stringify(Object.fromEntries(r.entries()));(async e=>{const t=await fetch(e);if(200!==t.status)throw new Error(`Could not fetch ${e}, status: ${t.status}`);return await t.json()})("https://c1cf054ef519e1a2.mokky.dev/users").then((e=>{let t;r.has("loginEmail")&&r.has("loginPassword")?(t=e.find((e=>r.get("loginEmail")===e.signupEmail&&r.get("loginPassword")===e.signupPassword)),void 0===t?.id?(n(a.incorrectUser.text,a.incorrectUser.class),i=!1):i=!0):r.has("signupEmail")&&r.has("signupPassword")&&(t=e.find((e=>r.get("signupEmail")===e.signupEmail||r.get("signupPassword")===e.signupPassword)),void 0!==t?.id?(n(a.incorrectUser.text,a.incorrectUser.class),i=!1):i=!0)})).then((()=>{i?s("https://c1cf054ef519e1a2.mokky.dev/users",u).then((e=>{console.log(e),n(a.success.text,a.success.class),function(){const e=document.querySelectorAll("[data-login]"),t=document.querySelectorAll("[data-signup]"),s=document.querySelectorAll("[data-exit]");s.forEach((e=>e.classList.remove("none"))),e.forEach((e=>e.classList.add("none"))),t.forEach((e=>e.classList.add("none"))),s.forEach((n=>{n.addEventListener("click",(()=>{s.forEach((e=>e.classList.add("none"))),e.forEach((e=>e.classList.remove("none"))),t.forEach((e=>e.classList.remove("none")))}))}))}()})).catch((()=>{n(a.failure.text,a.failure.class)})).finally((()=>{c(t,d)})):c(t,d)}))}))}(t)}))},o=function(e){const t=document.querySelectorAll(e);window.addEventListener("load",(()=>{t.forEach(((e,t)=>{e.href===window.location.href||0==t&&-1===window.location.href.indexOf("html")?e.classList.add("active"):e.classList.remove("active")}))}))};window.addEventListener("DOMContentLoaded",(()=>{(function(){const e=document.querySelector(".mobile-nav__btn"),t=document.querySelector(".mobile-nav"),s=document.querySelector(".nav-icon");let n=0;e.addEventListener("click",(function(){t.classList.toggle("mobile-nav_open"),s.classList.toggle("nav-icon_active"),document.body.classList.toggle("no-scroll"),t.classList.contains("mobile-nav_open")?(n=window.scrollY,document.body.style.top=`-${n}px`):(document.body.style.top="",window.scrollTo(0,n))}))})(),t(".modal__login","[data-login]"),t(".modal__signup","[data-signup]"),(()=>{const e=document.querySelectorAll(".password__btn"),t=document.querySelectorAll(".password__input");e.forEach(((e,s)=>{e.addEventListener("click",(()=>{e.classList.toggle("password__btn_active"),t.forEach(((e,t)=>{s===t&&("password"===e.getAttribute("type")?e.setAttribute("type","text"):e.setAttribute("type","password"))}))}))}))})(),n("#loginForm","You are successfully logged in to your account","This user was not found. Please sign up at first"),n("#signupForm","You are successfully registered","This data has already been registered. Please log in or use another data to sign up"),function(e){const t=document.querySelectorAll(e),n="./../../img/spinner.svg",o={text:"Thank you for your message! We'll send you the information",class:"green"},c={text:"Something went wrong :(",class:"red"};t.forEach((e=>{!function(e){function t(t,s){const n=document.createElement("div");n.textContent=t,n.style.marginTop="15px",n.style.textAlign="center",n.style.fontSize="14px",n.classList.add(s),e.append(n),setTimeout((()=>{n.remove()}),4e3)}e.addEventListener("submit",(a=>{a.preventDefault();const i=document.createElement("img");i.src=n,i.style.marginTop="15px",i.style.alignSelf="center",e.append(i);const r=new FormData(e),l=JSON.stringify(Object.fromEntries(r.entries()));s("https://c1cf054ef519e1a2.mokky.dev/subscribers",l).then((e=>{console.log(e),t(o.text,o.class)})).catch((()=>{t(c.text,c.class)})).finally((()=>{e.reset(),i.remove()}))}))}(e)}))}("#newsletterForm"),o(".header-nav__list a"),o(".mobile-nav__list a")}))}();